- name: install packages
  apt:
    state: latest
    name:
      - brightnessctl
      - grim
      - pulseaudio
      - slurp
      - sway
      - swaylock
      - swayidle
      - wl-clipboard

- name: add me to video and input groups
  user:
    name: '{{ ansible_env.USER }}'
    append: yes
    groups:
      - input
      - video

- name: ensures directories exist
  file: path={{ ansible_env.HOME }}/{{ item }} state=directory
  with_items:
    - .local/bin/
    - .config/sway
    - .config/swaylock

- name: copy files
  copy: src={{ item.src }}
        dest={{ ansible_env.HOME }}/{{ item.dest }}
        owner={{ ansible_env.USER }}
        mode={{ item.mode | default('0644') }}
  with_items:
    - {src: 'sway-config', dest: '.config/sway/config'}
    - {src: 'sway-launcher', dest: '.local/bin/sway-launcher', mode: '0744'}
    - {src: 'swaylock-config', dest: '.config/swaylock/config'}
    - {src: 'sway-statusbar', dest: '.local/bin/sway-statusbar', mode: '0744'}
    - {src: 'mako', dest: '.local/bin/mako', mode: '0744'}


- name: wl-clipboard-x11 | clone repo
  git: repo=https://github.com/brunelli/wl-clipboard-x11.git
       dest=/tmp/wl-clipboard-x11
       accept_hostkey=yes

- name: wl-clipboard-x11 | install
  command: make install
  args:
    chdir: /tmp/wl-clipboard-x11
    creates: /usr/bin/xclip

